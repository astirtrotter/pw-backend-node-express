extends ../default
include ../mixin/check

block content
  h1 #{title}
  .nav.nav-tabs.mt-4
    a.nav-item.nav-link.active(data-toggle='tab', href='#nav-general') General
    a.nav-item.nav-link(data-toggle='tab', href='#nav-security') Security
    a.nav-item.nav-link(data-toggle='tab', href='#nav-details') Details
  .tab-content.py-4.border.bg-light
    #nav-general.tab-pane.fade.show.active
      .d-flex.flex-row.flex-wrap-reverse
        .col-md-9.d-flex.flex-column
          .card
            .card-body.d-flex.flex-column
              // image, name, location
              .d-flex.flex-row.flex-wrap.mb-4
                // image
                .col-sm-4
                  if isOwnerOrAdmin
                    .hovereffect
                      img.border.img-fluid.rounded-circle.portrait-1(src=`/assets/users/${usr._id}.png`, onerror=`this.src='/assets/users/default.png'`)
                      .overlay.portrait-1.rounded-circle
                        label.info Change
                    input.d-none(type='file', accept='image/png, image/jpeg')
                  else
                    img.border.img-fluid.rounded-circle.portrait-1(src=`/assets/users/${usr._id}.png`, onerror=`this.src='/assets/users/default.png'`)
                // name, location
                .col-sm-4
                  label(for='name') Full Name
                  input#name.form-control(type='text', value=usr.profile.name, disabled=!isOwnerOrAdmin)
                .col-sm-4
                  label(for='location') Location
                  input#location.form-control(type='text', value=usr.profile.location, disabled=!isOwnerOrAdmin)
              // title
              label.mt-2(for='title') Title
              input#title.form-control(type='text', value=usr.profile.title, disabled=!isOwnerOrAdmin)
              // overview
              label.mt-2(for='overview') Overview
              textarea#overview.form-control(rows=10, disabled=!isOwnerOrAdmin) #{usr.profile.overview}

        .col-md-3.d-flex.flex-column
          .card
            .card-body.d-flex.flex-column
              .custom-control.custom-checkbox
                input#admin.custom-control-input(type='checkbox', checked=usr.meta.admin, disabled=true)
                label.custom-control-label(for='admin') Super User
              .custom-control.custom-checkbox.mt-2
                input#allowed.custom-control-input(type='checkbox', checked=usr.meta.allowed, disabled=!isOwnerOrAdmin)
                label.custom-control-label(for='allowed') Allowed

    #nav-security.tab-pane.fade Security
    #nav-details.tab-pane.fade Details

  .mt-5.d-flex.flex-row.justify-content-center
    .btn.btn-primary.px-4(onclick=`window.open('#', '_blank')`) FrontEnd
    if user.meta.admin || usr._id.equals(user._id)
      .btn.btn-danger.px-4.ml-5(onclick=`confirmDeleting('/api/users/${usr._id}/delete')`) Delete
